{% load static %}
<form method="POST"
      hx-post="{% url 'register_form' %}"
      hx-target="#register-container"
      hx-swap="outerHTML"
      class="bg-white p-6 rounded-lg shadow-md w-full max-w-md mx-auto border border-blue-200 space-y-4">

  {% csrf_token %}
  <h2 class="text-xl font-bold text-center text-blue-700 mb-4">Crear cuenta en Cuenta Clara üí≥</h2>

  <label class="block text-sm font-medium text-gray-700">Nombre completo</label>
  {{ form.first_name|add_class:"w-full px-3 py-2 border rounded" }}

  <label class="block text-sm font-medium text-gray-700">Correo electr√≥nico</label>
  {{ form.email|add_class:"w-full px-3 py-2 border rounded" }}
  <div id="email-feedback" class="text-sm text-red-600 mt-1"></div>

  <label class="block text-sm font-medium text-gray-700">Contrase√±a</label>
  {{ form.password1|add_class:"w-full px-3 py-2 border rounded" }}

  <label class="block text-sm font-medium text-gray-700">Confirmar contrase√±a</label>
  {{ form.password2|add_class:"w-full px-3 py-2 border rounded" }}

  <label class="block text-sm font-medium text-gray-700">Tipo de usuario</label>
  {{ form.tipo_usuario|add_class:"w-full px-3 py-2 border rounded" }}

  <label class="inline-flex items-center text-sm">
    <input type="checkbox" required class="form-checkbox text-blue-600 mr-2">
    Acepto los t√©rminos y condiciones
  </label>

  <button type="submit"
          class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 rounded transition">
    Crear cuenta
  </button>
</form>

<script>
  const emailInput = document.querySelector('input[name="email"]')
  if (emailInput) {
    emailInput.setAttribute('hx-get', '{% url "verificar_email" %}')
    emailInput.setAttribute('hx-trigger', 'keyup changed delay:500ms')
    emailInput.setAttribute('hx-target', '#email-feedback')
    emailInput.setAttribute('hx-swap', 'innerHTML')
  }
</script>
